# VAQSO_firmware
匂い提示デバイスのVAQSOがあまり思うように動作しなかったため、単純なファームウェアを構築しました。

VAQSOはマイコンにPololu A-star 32U4が使用されており、そいつに書き込みます。
Arduino IDEで書き込みを行っていただきますが、そのためにドライバの準備やボードマネージャの設定をする必要があります。
これに関しては下記のサイトが参考になります。

* https://www.switch-science.com/catalog/1748/
* https://qiita.com/shunjisato/items/b18ab160c9fed092aef4

# 仕様

VAQSOについて、複数のファンを同時に動作させると制御マイコンの電源不足が起こります。そのため、1つずつファンを動作させ、そのファンを高速に切り替えることで複数のファンを同時に動作させるようにしています。
そのため、ファンからの音がうるさく感じるかもしれません（allf1コマンドを試したらわかります）。

現在は1周期を100msにしているので、その値をうまいこと変更したら解決するかと思います。


# VAQSOを操作するコマンドについて

文字列の処理に自由度を持たせてめんどうな実装をしたくなかったので、コマンドを勝手に変えてしまいました。全部5文字のコマンドです。  

まず、<b>ファンは1つずつ起動</b>させていきます。そのコマンドは下記の様になります。

> fan01  // ファン0 を 起動  
> fan00  // ファン0 を 停止  
> fan21  // ファン2 を 起動  

次に、<b>すべてのファンをON/OFF</b>するコマンドです。使う機会はありませんが下記の様なコマンドです。

> allf1  // ファンをすべて起動  
> allf0  // ファンをすべて停止 = resetコマンド

最後に、<b>すべてのファンをOFF</b>にするコマンドです。

> reset  // ファンをすべて停止 = allf0コマンド

# 今後
 
速度調節に需要があれば、実装しますよ。その際はf0100とかf3045みたいなコマンドにします。まだ実装してないけど。
